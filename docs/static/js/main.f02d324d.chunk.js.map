{"version":3,"sources":["utils/dom-to-image.js","i18n.js","reducers/characters.js","reducers/dataset.js","models/Formation.js","reducers/index.js","container/Header.js","service/Session.js","config/api.js","utils/index.js","actions/index.js","container/Formation.js","components/Mercenary.js","container/List.js","container/Toolbar.js","service/Characters.js","App.js","serviceWorker.js","index.js"],"names":["global","util","escape","string","replace","parseExtension","mimeType","url","extension","toLowerCase","WOFF","mimes","dataAsUrl","content","type","isDataUrl","search","canvasToBlob","canvas","toBlob","Promise","resolve","binaryString","window","atob","toDataURL","split","length","binaryArray","Uint8Array","i","charCodeAt","Blob","resolveUrl","baseUrl","doc","document","implementation","createHTMLDocument","base","createElement","head","appendChild","a","body","href","getAndEncode","TIMEOUT","domtoimage","impl","options","cacheBust","test","Date","getTime","placeholder","request","XMLHttpRequest","onreadystatechange","readyState","status","fail","encoder","FileReader","onloadend","result","readAsDataURL","response","ontimeout","responseType","timeout","open","send","imagePlaceholder","message","console","error","uid","index","Math","random","pow","toString","slice","delay","ms","arg","setTimeout","asArray","arrayLike","Array","prototype","call","escapeXhtml","makeImage","uri","reject","image","Image","onload","onerror","src","width","node","leftBorder","px","rightBorder","scrollWidth","height","topBorder","bottomBorder","scrollHeight","match","exec","styleProperty","value","getComputedStyle","getPropertyValue","parseFloat","newUtil","inliner","URL_REGEX","inlineAll","get","shouldProcess","nothingToInline","then","readUrls","urls","done","forEach","inline","push","filter","data","dataUrl","RegExp","urlAsRegex","newInliner","fontFaces","resolveAll","readAll","webFonts","all","map","webFont","cssStrings","join","styleSheets","cssRules","sheet","bind","e","log","rule","CSSRule","FONT_FACE_RULE","style","rules","newWebFont","webFontRule","parentStyleSheet","cssText","newFontFaces","images","Element","background","inlined","setProperty","getPropertyPriority","inlineBackground","HTMLImageElement","newImage","childNodes","child","element","newImages","defaultOptions","undefined","toSvg","toPng","draw","toJpeg","quality","toPixelData","getContext","getImageData","copyOptions","root","HTMLCanvasElement","cloneNode","clone","original","children","parent","childClone","cloneChildrenInOrder","cloneChildren","source","target","name","copyProperties","className","styleElement","selector","formatCssText","formatCssProperties","createTextNode","formatPseudoElementStyle","clonePseudoElement","HTMLTextAreaElement","innerHTML","HTMLInputElement","setAttribute","SVGElement","SVGRectElement","attribute","getAttribute","processClone","embedFonts","inlineImages","bgcolor","backgroundColor","Object","keys","property","XMLSerializer","serializeToString","xhtml","foreignObject","svg","makeSvgDataUri","domNode","ctx","fillStyle","fillRect","newCanvas","drawImage","makeNodeCopy","cloneStyle","copyStyle","clonePseudoElements","copyUserInput","fixSvg","styleNode","module","exports","resources","en","translation","zhTW","zhCN","i18n","use","detector","initReactI18next","init","lng","keySeparator","interpolation","escapeValue","characters","state","action","payload","initialState","formation","id","top","left","backgroundImage","code","dragOver","backcolor","backimage","order","dataset","combineReducers","Header","Component","connect","key","store","session","del","remove","thumbnailUrl","getThumbnailUrlByImageName","_uiIconImageName","resizeImageURL","datas","w","h","img","dataURI","crossOrigin","updateDataset","Formation","props","onDragStart","ev","scode","sid","dataTransfer","setData","onDragOver","preventDefault","onDragEnter","tid","onDragChangeStyle","onDragLeave","onDrop","getData","find","onCheckExistImage","onAddImage","onRemoveImage","onDragEnd","dispatch","alertID","alertTimer","c","this","_code","f","Number","_type","pid","drag","exist","setState","warn","bool","hasUpdate","data-type","draggable","onClick","onFormationClick","onDoubleClick","renderFormation","Mercenary","params","_charName_TW","URL","data-tooltip","set","List","onStarChange","_label","stars","star","label","checked","onNameOptionsChange","nameOptions","nameOption","types","shape","color","animation","icon","onChange","_growType","_star","renderTypes","renderFilterStars","renderFilterNameOptions","renderCharacters","Toolbar","downloadSizeSelected","downloadSizeCustom","downloadSize","getElementById","size","d","newDataUri","download","click","removeChild","catch","onUpdateOptions","defaultValue","onFocus","onDownloadClick","getCharacters","fetch","json","App","database","users","Boolean","location","hostname","createStore","reducers","applyMiddleware","thunk","ReactDOM","render","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.f02d324d.chunk.js","sourcesContent":["/* eslint-disable */\n(function (global) {\n    'use strict';\n\n    var util = newUtil();\n    var inliner = newInliner();\n    var fontFaces = newFontFaces();\n    var images = newImages();\n\n    // Default impl options\n    var defaultOptions = {\n        // Default is to fail on error, no placeholder\n        imagePlaceholder: undefined,\n        // Default cache bust is false, it will use the cache\n        cacheBust: false\n    };\n\n    var domtoimage = {\n        toSvg: toSvg,\n        toPng: toPng,\n        toJpeg: toJpeg,\n        toBlob: toBlob,\n        toPixelData: toPixelData,\n        impl: {\n            fontFaces: fontFaces,\n            images: images,\n            util: util,\n            inliner: inliner,\n            options: {}\n        }\n    };\n\n    if (typeof module !== 'undefined')\n        module.exports = domtoimage;\n    else\n        global.domtoimage = domtoimage;\n\n\n    /**\n     * @param {Node} node - The DOM Node object to render\n     * @param {Object} options - Rendering options\n     * @param {Function} options.filter - Should return true if passed node should be included in the output\n     *          (excluding node means excluding it's children as well). Not called on the root node.\n     * @param {String} options.bgcolor - color for the background, any valid CSS color value.\n     * @param {Number} options.width - width to be applied to node before rendering.\n     * @param {Number} options.height - height to be applied to node before rendering.\n     * @param {Object} options.style - an object whose properties to be copied to node's style before rendering.\n     * @param {Number} options.quality - a Number between 0 and 1 indicating image quality (applicable to JPEG only),\n                defaults to 1.0.\n     * @param {String} options.imagePlaceholder - dataURL to use as a placeholder for failed images, default behaviour is to fail fast on images we can't fetch\n     * @param {Boolean} options.cacheBust - set to true to cache bust by appending the time to the request url\n     * @return {Promise} - A promise that is fulfilled with a SVG image data URL\n     * */\n    function toSvg(node, options) {\n        options = options || {};\n        copyOptions(options);\n        return Promise.resolve(node)\n            .then(function (node) {\n                return cloneNode(node, options.filter, true);\n            })\n            .then(embedFonts)\n            .then(inlineImages)\n            .then(applyOptions)\n            .then(function (clone) {\n                return makeSvgDataUri(clone,\n                    options.width || util.width(node),\n                    options.height || util.height(node)\n                );\n            });\n\n        function applyOptions(clone) {\n            if (options.bgcolor) clone.style.backgroundColor = options.bgcolor;\n\n            if (options.width) clone.style.width = options.width + 'px';\n            if (options.height) clone.style.height = options.height + 'px';\n\n            if (options.style)\n                Object.keys(options.style).forEach(function (property) {\n                    clone.style[property] = options.style[property];\n                });\n\n            return clone;\n        }\n    }\n\n    /**\n     * @param {Node} node - The DOM Node object to render\n     * @param {Object} options - Rendering options, @see {@link toSvg}\n     * @return {Promise} - A promise that is fulfilled with a Uint8Array containing RGBA pixel data.\n     * */\n    function toPixelData(node, options) {\n        return draw(node, options || {})\n            .then(function (canvas) {\n                return canvas.getContext('2d').getImageData(\n                    0,\n                    0,\n                    util.width(node),\n                    util.height(node)\n                ).data;\n            });\n    }\n\n    /**\n     * @param {Node} node - The DOM Node object to render\n     * @param {Object} options - Rendering options, @see {@link toSvg}\n     * @return {Promise} - A promise that is fulfilled with a PNG image data URL\n     * */\n    function toPng(node, options) {\n        return draw(node, options || {})\n            .then(function (canvas) {\n                return canvas.toDataURL();\n            });\n    }\n\n    /**\n     * @param {Node} node - The DOM Node object to render\n     * @param {Object} options - Rendering options, @see {@link toSvg}\n     * @return {Promise} - A promise that is fulfilled with a JPEG image data URL\n     * */\n    function toJpeg(node, options) {\n        options = options || {};\n        return draw(node, options)\n            .then(function (canvas) {\n                return canvas.toDataURL('image/jpeg', options.quality || 1.0);\n            });\n    }\n\n    /**\n     * @param {Node} node - The DOM Node object to render\n     * @param {Object} options - Rendering options, @see {@link toSvg}\n     * @return {Promise} - A promise that is fulfilled with a PNG image blob\n     * */\n    function toBlob(node, options) {\n        return draw(node, options || {})\n            .then(util.canvasToBlob);\n    }\n\n    function copyOptions(options) {\n        // Copy options to impl options for use in impl\n        if(typeof(options.imagePlaceholder) === 'undefined') {\n            domtoimage.impl.options.imagePlaceholder = defaultOptions.imagePlaceholder;\n        } else {\n            domtoimage.impl.options.imagePlaceholder = options.imagePlaceholder;\n        }\n\n        if(typeof(options.cacheBust) === 'undefined') {\n            domtoimage.impl.options.cacheBust = defaultOptions.cacheBust;\n        } else {\n            domtoimage.impl.options.cacheBust = options.cacheBust;\n        }\n    }\n\n    function draw(domNode, options) {\n        return toSvg(domNode, options)\n            .then(util.makeImage)\n            .then(util.delay(100))\n            .then(function (image) {\n                var canvas = newCanvas(domNode);\n                canvas.getContext('2d').drawImage(image, 0, 0);\n                return canvas;\n            });\n\n        function newCanvas(domNode) {\n            var canvas = document.createElement('canvas');\n            canvas.width = options.width || util.width(domNode);\n            canvas.height = options.height || util.height(domNode);\n\n            if (options.bgcolor) {\n                var ctx = canvas.getContext('2d');\n                ctx.fillStyle = options.bgcolor;\n                ctx.fillRect(0, 0, canvas.width, canvas.height);\n            }\n\n            return canvas;\n        }\n    }\n\n    function cloneNode(node, filter, root) {\n        if (!root && filter && !filter(node)) return Promise.resolve();\n\n        return Promise.resolve(node)\n            .then(makeNodeCopy)\n            .then(function (clone) {\n                return cloneChildren(node, clone, filter);\n            })\n            .then(function (clone) {\n                return processClone(node, clone);\n            });\n\n        function makeNodeCopy(node) {\n            if (node instanceof HTMLCanvasElement) return util.makeImage(node.toDataURL());\n            return node.cloneNode(false);\n        }\n\n        function cloneChildren(original, clone, filter) {\n            var children = original.childNodes;\n            if (children.length === 0) return Promise.resolve(clone);\n\n            return cloneChildrenInOrder(clone, util.asArray(children), filter)\n                .then(function () {\n                    return clone;\n                });\n\n            function cloneChildrenInOrder(parent, children, filter) {\n                var done = Promise.resolve();\n                children.forEach(function (child) {\n                    done = done\n                        .then(function () {\n                            return cloneNode(child, filter);\n                        })\n                        .then(function (childClone) {\n                            if (childClone) parent.appendChild(childClone);\n                        });\n                });\n                return done;\n            }\n        }\n\n        function processClone(original, clone) {\n            if (!(clone instanceof Element)) return clone;\n\n            return Promise.resolve()\n                .then(cloneStyle)\n                .then(clonePseudoElements)\n                .then(copyUserInput)\n                .then(fixSvg)\n                .then(function () {\n                    return clone;\n                });\n\n            function cloneStyle() {\n                copyStyle(window.getComputedStyle(original), clone.style);\n\n                function copyStyle(source, target) {\n                    if (source.cssText) target.cssText = source.cssText;\n                    else copyProperties(source, target);\n\n                    function copyProperties(source, target) {\n                        util.asArray(source).forEach(function (name) {\n                            target.setProperty(\n                                name,\n                                source.getPropertyValue(name),\n                                source.getPropertyPriority(name)\n                            );\n                        });\n                    }\n                }\n            }\n\n            function clonePseudoElements() {\n                [':before', ':after'].forEach(function (element) {\n                    clonePseudoElement(element);\n                });\n\n                function clonePseudoElement(element) {\n                    var style = window.getComputedStyle(original, element);\n                    var content = style.getPropertyValue('content');\n\n                    if (content === '' || content === 'none') return;\n\n                    var className = util.uid();\n                    clone.className = clone.className + ' ' + className;\n                    var styleElement = document.createElement('style');\n                    styleElement.appendChild(formatPseudoElementStyle(className, element, style));\n                    clone.appendChild(styleElement);\n\n                    function formatPseudoElementStyle(className, element, style) {\n                        var selector = '.' + className + ':' + element;\n                        var cssText = style.cssText ? formatCssText(style) : formatCssProperties(style);\n                        return document.createTextNode(selector + '{' + cssText + '}');\n\n                        function formatCssText(style) {\n                            var content = style.getPropertyValue('content');\n                            return style.cssText + ' content: ' + content + ';';\n                        }\n\n                        function formatCssProperties(style) {\n\n                            return util.asArray(style)\n                                .map(formatProperty)\n                                .join('; ') + ';';\n\n                            function formatProperty(name) {\n                                return name + ': ' +\n                                    style.getPropertyValue(name) +\n                                    (style.getPropertyPriority(name) ? ' !important' : '');\n                            }\n                        }\n                    }\n                }\n            }\n\n            function copyUserInput() {\n                if (original instanceof HTMLTextAreaElement) clone.innerHTML = original.value;\n                if (original instanceof HTMLInputElement) clone.setAttribute(\"value\", original.value);\n            }\n\n            function fixSvg() {\n                if (!(clone instanceof SVGElement)) return;\n                clone.setAttribute('xmlns', 'http://www.w3.org/2000/svg');\n\n                if (!(clone instanceof SVGRectElement)) return;\n                ['width', 'height'].forEach(function (attribute) {\n                    var value = clone.getAttribute(attribute);\n                    if (!value) return;\n\n                    clone.style.setProperty(attribute, value);\n                });\n            }\n        }\n    }\n\n    function embedFonts(node) {\n        return fontFaces.resolveAll()\n            .then(function (cssText) {\n                var styleNode = document.createElement('style');\n                node.appendChild(styleNode);\n                styleNode.appendChild(document.createTextNode(cssText));\n                return node;\n            });\n    }\n\n    function inlineImages(node) {\n        return images.inlineAll(node)\n            .then(function () {\n                return node;\n            });\n    }\n\n    function makeSvgDataUri(node, width, height) {\n        return Promise.resolve(node)\n            .then(function (node) {\n                node.setAttribute('xmlns', 'http://www.w3.org/1999/xhtml');\n                return new XMLSerializer().serializeToString(node);\n            })\n            .then(util.escapeXhtml)\n            .then(function (xhtml) {\n                return '<foreignObject x=\"0\" y=\"0\" width=\"100%\" height=\"100%\">' + xhtml + '</foreignObject>';\n            })\n            .then(function (foreignObject) {\n                return '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"' + width + '\" height=\"' + height + '\">' +\n                    foreignObject + '</svg>';\n            })\n            .then(function (svg) {\n                return 'data:image/svg+xml;charset=utf-8,' + svg;\n            });\n    }\n\n    function newUtil() {\n        return {\n            escape: escape,\n            parseExtension: parseExtension,\n            mimeType: mimeType,\n            dataAsUrl: dataAsUrl,\n            isDataUrl: isDataUrl,\n            canvasToBlob: canvasToBlob,\n            resolveUrl: resolveUrl,\n            getAndEncode: getAndEncode,\n            uid: uid(),\n            delay: delay,\n            asArray: asArray,\n            escapeXhtml: escapeXhtml,\n            makeImage: makeImage,\n            width: width,\n            height: height\n        };\n\n        function mimes() {\n            /*\n             * Only WOFF and EOT mime types for fonts are 'real'\n             * see http://www.iana.org/assignments/media-types/media-types.xhtml\n             */\n            var WOFF = 'application/font-woff';\n            var JPEG = 'image/jpeg';\n\n            return {\n                'woff': WOFF,\n                'woff2': WOFF,\n                'ttf': 'application/font-truetype',\n                'eot': 'application/vnd.ms-fontobject',\n                'png': 'image/png',\n                'jpg': JPEG,\n                'jpeg': JPEG,\n                'gif': 'image/gif',\n                'tiff': 'image/tiff',\n                'svg': 'image/svg+xml'\n            };\n        }\n\n        function parseExtension(url) {\n            var match = /\\.([^\\.\\/]*?)$/g.exec(url);\n            if (match) return match[1];\n            else return '';\n        }\n\n        function mimeType(url) {\n            var extension = parseExtension(url).toLowerCase();\n            return mimes()[extension] || '';\n        }\n\n        function isDataUrl(url) {\n            return url.search(/^(data:)/) !== -1;\n        }\n\n        function toBlob(canvas) {\n            return new Promise(function (resolve) {\n                var binaryString = window.atob(canvas.toDataURL().split(',')[1]);\n                var length = binaryString.length;\n                var binaryArray = new Uint8Array(length);\n\n                for (var i = 0; i < length; i++)\n                    binaryArray[i] = binaryString.charCodeAt(i);\n\n                resolve(new Blob([binaryArray], {\n                    type: 'image/png'\n                }));\n            });\n        }\n\n        function canvasToBlob(canvas) {\n            if (canvas.toBlob)\n                return new Promise(function (resolve) {\n                    canvas.toBlob(resolve);\n                });\n\n            return toBlob(canvas);\n        }\n\n        function resolveUrl(url, baseUrl) {\n            var doc = document.implementation.createHTMLDocument();\n            var base = doc.createElement('base');\n            doc.head.appendChild(base);\n            var a = doc.createElement('a');\n            doc.body.appendChild(a);\n            base.href = baseUrl;\n            a.href = url;\n            return a.href;\n        }\n\n        function uid() {\n            var index = 0;\n\n            return function () {\n                return 'u' + fourRandomChars() + index++;\n\n                function fourRandomChars() {\n                    /* see http://stackoverflow.com/a/6248722/2519373 */\n                    return ('0000' + (Math.random() * Math.pow(36, 4) << 0).toString(36)).slice(-4);\n                }\n            };\n        }\n\n        function makeImage(uri) {\n            return new Promise(function (resolve, reject) {\n                var image = new Image();\n                image.onload = function () {\n                    resolve(image);\n                };\n                image.onerror = reject;\n                image.src = uri;\n            });\n        }\n\n        function getAndEncode(url) {\n            var TIMEOUT = 30000;\n            if(domtoimage.impl.options.cacheBust) {\n                // Cache bypass so we dont have CORS issues with cached images\n                // Source: https://developer.mozilla.org/en/docs/Web/API/XMLHttpRequest/Using_XMLHttpRequest#Bypassing_the_cache\n                url += ((/\\?/).test(url) ? \"&\" : \"?\") + (new Date()).getTime();\n            }\n\n            return new Promise(function (resolve) {\n                var request = new XMLHttpRequest();\n\n                request.onreadystatechange = done;\n                request.ontimeout = timeout;\n                request.responseType = 'blob';\n                request.timeout = TIMEOUT;\n                request.open('GET', url, true);\n                request.send();\n\n                var placeholder;\n                if(domtoimage.impl.options.imagePlaceholder) {\n                    var split = domtoimage.impl.options.imagePlaceholder.split(/,/);\n                    if(split && split[1]) {\n                        placeholder = split[1];\n                    }\n                }\n\n                function done() {\n                    if (request.readyState !== 4) return;\n\n                    if (request.status !== 200) {\n                        if(placeholder) {\n                            resolve(placeholder);\n                        } else {\n                            fail('cannot fetch resource: ' + url + ', status: ' + request.status);\n                        }\n\n                        return;\n                    }\n\n                    var encoder = new FileReader();\n                    encoder.onloadend = function () {\n                        var content = encoder.result.split(/,/)[1];\n                        resolve(content);\n                    };\n                    encoder.readAsDataURL(request.response);\n                }\n\n                function timeout() {\n                    if(placeholder) {\n                        resolve(placeholder);\n                    } else {\n                        fail('timeout of ' + TIMEOUT + 'ms occured while fetching resource: ' + url);\n                    }\n                }\n\n                function fail(message) {\n                    console.error(message);\n                    resolve('');\n                }\n            });\n        }\n\n        function dataAsUrl(content, type) {\n            return 'data:' + type + ';base64,' + content;\n        }\n\n        function escape(string) {\n            return string.replace(/([.*+?^${}()|\\[\\]\\/\\\\])/g, '\\\\$1');\n        }\n\n        function delay(ms) {\n            return function (arg) {\n                return new Promise(function (resolve) {\n                    setTimeout(function () {\n                        resolve(arg);\n                    }, ms);\n                });\n            };\n        }\n\n        function asArray(arrayLike) {\n            // var array = [];\n            // var length = arrayLike.length;\n            // for (var i = 0; i < length; i++) array.push(arrayLike[i]);\n            // return array;\n            return Array.prototype.slice.call(arrayLike);\n        }\n\n        function escapeXhtml(string) {\n            return string.replace(/#/g, '%23').replace(/\\n/g, '%0A');\n        }\n\n        function width(node) {\n            var leftBorder = px(node, 'border-left-width');\n            var rightBorder = px(node, 'border-right-width');\n            return node.scrollWidth + leftBorder + rightBorder;\n        }\n\n        function height(node) {\n            var topBorder = px(node, 'border-top-width');\n            var bottomBorder = px(node, 'border-bottom-width');\n            return node.scrollHeight + topBorder + bottomBorder;\n        }\n\n        function px(node, styleProperty) {\n            var value = window.getComputedStyle(node).getPropertyValue(styleProperty);\n            return parseFloat(value.replace('px', ''));\n        }\n    }\n\n    function newInliner() {\n        var URL_REGEX = /url\\(['\"]?([^'\"]+?)['\"]?\\)/g;\n\n        return {\n            inlineAll: inlineAll,\n            shouldProcess: shouldProcess,\n            impl: {\n                readUrls: readUrls,\n                inline: inline\n            }\n        };\n\n        function shouldProcess(string) {\n            return string.search(URL_REGEX) !== -1;\n        }\n\n        function readUrls(string) {\n            var result = [];\n            var match;\n            while ((match = URL_REGEX.exec(string)) !== null) {\n                result.push(match[1]);\n            }\n            return result.filter(function (url) {\n                return !util.isDataUrl(url);\n            });\n        }\n\n        function inline(string, url, baseUrl, get) {\n            return Promise.resolve(url)\n                .then(function (url) {\n                    return baseUrl ? util.resolveUrl(url, baseUrl) : url;\n                })\n                .then(get || util.getAndEncode)\n                .then(function (data) {\n                    return util.dataAsUrl(data, util.mimeType(url));\n                })\n                .then(function (dataUrl) {\n                    return string.replace(urlAsRegex(url), '$1' + dataUrl + '$3');\n                });\n\n            function urlAsRegex(url) {\n                return new RegExp('(url\\\\([\\'\"]?)(' + util.escape(url) + ')([\\'\"]?\\\\))', 'g');\n            }\n        }\n\n        function inlineAll(string, baseUrl, get) {\n            if (nothingToInline()) return Promise.resolve(string);\n\n            return Promise.resolve(string)\n                .then(readUrls)\n                .then(function (urls) {\n                    var done = Promise.resolve(string);\n                    urls.forEach(function (url) {\n                        done = done.then(function (string) {\n                            return inline(string, url, baseUrl, get);\n                        });\n                    });\n                    return done;\n                });\n\n            function nothingToInline() {\n                return !shouldProcess(string);\n            }\n        }\n    }\n\n    function newFontFaces() {\n        return {\n            resolveAll: resolveAll,\n            impl: {\n                readAll: readAll\n            }\n        };\n\n        function resolveAll() {\n            return readAll(document)\n                .then(function (webFonts) {\n                    return Promise.all(\n                        webFonts.map(function (webFont) {\n                            return webFont.resolve();\n                        })\n                    );\n                })\n                .then(function (cssStrings) {\n                    return cssStrings.join('\\n');\n                });\n        }\n\n        function readAll() {\n            return Promise.resolve(util.asArray(document.styleSheets))\n                .then(getCssRules)\n                .then(selectWebFontRules)\n                .then(function (rules) {\n                    return rules.map(newWebFont);\n                });\n\n            function selectWebFontRules(cssRules) {\n                return cssRules\n                    .filter(function (rule) {\n                        return rule.type === CSSRule.FONT_FACE_RULE;\n                    })\n                    .filter(function (rule) {\n                        return inliner.shouldProcess(rule.style.getPropertyValue('src'));\n                    });\n            }\n\n            function getCssRules(styleSheets) {\n                var cssRules = [];\n                styleSheets.forEach(function (sheet) {\n                    try {\n                        util.asArray(sheet.cssRules || []).forEach(cssRules.push.bind(cssRules));\n                    } catch (e) {\n                        console.log('Error while reading CSS rules from ' + sheet.href, e.toString());\n                    }\n                });\n                return cssRules;\n            }\n\n            function newWebFont(webFontRule) {\n                return {\n                    resolve: function resolve() {\n                        var baseUrl = (webFontRule.parentStyleSheet || {}).href;\n                        return inliner.inlineAll(webFontRule.cssText, baseUrl);\n                    },\n                    src: function () {\n                        return webFontRule.style.getPropertyValue('src');\n                    }\n                };\n            }\n        }\n    }\n\n    function newImages() {\n        return {\n            inlineAll: inlineAll,\n            impl: {\n                newImage: newImage\n            }\n        };\n\n        function newImage(element) {\n            return {\n                inline: inline\n            };\n\n            function inline(get) {\n                if (util.isDataUrl(element.src)) return Promise.resolve();\n\n                return Promise.resolve(element.src)\n                    .then(get || util.getAndEncode)\n                    .then(function (data) {\n                        return util.dataAsUrl(data, util.mimeType(element.src));\n                    })\n                    .then(function (dataUrl) {\n                        return new Promise(function (resolve, reject) {\n                            element.onload = resolve;\n                            element.onerror = reject;\n                            element.src = dataUrl;\n                        });\n                    });\n            }\n        }\n\n        function inlineAll(node) {\n            if (!(node instanceof Element)) return Promise.resolve(node);\n\n            return inlineBackground(node)\n                .then(function () {\n                    if (node instanceof HTMLImageElement)\n                        return newImage(node).inline();\n                    else\n                        return Promise.all(\n                            util.asArray(node.childNodes).map(function (child) {\n                                return inlineAll(child);\n                            })\n                        );\n                });\n\n            function inlineBackground(node) {\n                var background = node.style.getPropertyValue('background');\n\n                if (!background) return Promise.resolve(node);\n\n                return inliner.inlineAll(background)\n                    .then(function (inlined) {\n                        node.style.setProperty(\n                            'background',\n                            inlined,\n                            node.style.getPropertyPriority('background')\n                        );\n                    })\n                    .then(function () {\n                        return node;\n                    });\n            }\n        }\n    }\n})(this);\n","import i18n from 'i18next';\nimport { initReactI18next } from \"react-i18next\";\nimport detector from \"i18next-browser-languagedetector\";\n\n// the translations\n// (tip move them in a JSON file and import them)\nimport translationEN from './locales/en.json';\nimport translationZHTW from './locales/zh-tw.json';\nimport translationZHCN from './locales/zh-cn.json';\n\nconst resources = {\n  en: { translation: translationEN },\n  zhTW: { translation: translationZHTW },\n  zhCN: { translation: translationZHCN },\n};\n\ni18n\n  .use(detector)\n  .use(initReactI18next) // passes i18n down to react-i18next\n  .init({\n    resources,\n    lng: 'en',\n\n    keySeparator: false, // we do not use keys in form messages.welcome\n\n    interpolation: {\n      escapeValue: false, // react already safes from xss\n    },\n  });\n\nexport default i18n;\n","const characters = (state = [], action) => {\n    switch (action.type) {\n        case 'SET_CHARACTERS':\n            return action.payload;\n        default:\n            return state;\n    }\n}\n\nexport default characters;\n","import Formation from '../models/Formation';\n\nconst initialState = {\n    formation: Formation,\n    options: {\n        type: true,\n        backcolor: true,\n        backimage: true,\n        order: true,\n    },\n};\n\nconst dataset = (state = initialState, action) => {\n    switch (action.type) {\n        case 'RESET_FORMATION':\n            return { ...state, ...action.payload };\n        case 'UPDATE_FORMATION':\n            return { ...state, ...action.payload };\n        default:\n            return state;\n    }\n}\n\nexport default dataset;\n","const Formation = [\n    { id: 'a1', top: '9px', left: '13px', type: 0, backgroundImage: null, code: null, dragOver: false },\n    { id: 'a2', top: '9px', left: '127.5px', type: 0, backgroundImage: null, code: null, dragOver: false },\n    { id: 'a3', top: '9px', left: '242px', type: 0, backgroundImage: null, code: null, dragOver: false },\n    { id: 'a4', top: '9px', left: '356px', type: 0, backgroundImage: null, code: null, dragOver: false },\n    { id: 'a5', top: '9px', left: '471px', type: 0, backgroundImage: null, code: null, dragOver: false },\n    { id: 'a6', top: '9px', left: '585.5px', type: 0, backgroundImage: null, code: null, dragOver: false },\n    { id: 'b1', top: '122.5px', left: '13px', type: 0, backgroundImage: null, code: null, dragOver: false },\n    { id: 'b2', top: '122.5px', left: '127.5px', type: 0, backgroundImage: null, code: null, dragOver: false },\n    { id: 'b3', top: '122.5px', left: '242px', type: 0, backgroundImage: null, code: null, dragOver: false },\n    { id: 'b4', top: '122.5px', left: '356px', type: 0, backgroundImage: null, code: null, dragOver: false },\n    { id: 'b5', top: '122.5px', left: '471px', type: 0, backgroundImage: null, code: null, dragOver: false },\n    { id: 'b6', top: '122.5px', left: '585.5px', type: 0, backgroundImage: null, code: null, dragOver: false },\n    { id: 'c1', top: '239px', left: '13px', type: 0, backgroundImage: null, code: null, dragOver: false },\n    { id: 'c2', top: '239px', left: '127.5px', type: 0, backgroundImage: null, code: null, dragOver: false },\n    { id: 'c3', top: '239px', left: '242px', type: 0, backgroundImage: null, code: null, dragOver: false },\n    { id: 'c4', top: '239px', left: '356px', type: 0, backgroundImage: null, code: null, dragOver: false },\n    { id: 'c5', top: '239px', left: '471px', type: 0, backgroundImage: null, code: null, dragOver: false },\n    { id: 'c6', top: '239px', left: '585.5px', type: 0, backgroundImage: null, code: null, dragOver: false },\n];\n\nexport default Formation;\n","import { combineReducers } from 'redux';\n// import settings from './settings';\nimport characters from './characters';\nimport dataset from './dataset';\n\nexport default combineReducers({\n  dataset,\n  characters,\n})\n","import React, { Component } from 'react';\nimport './Header.scss';\n\nimport { connect } from 'react-redux';\n\nclass Header extends Component {\n  render() {\n    return (\n      <header id=\"header\">\n        <center>\n          <h1>BROWNDUST <small>棕色塵埃 × 陣型分享</small></h1>\n        </center>\n      </header>\n    );\n  }\n}\n\nHeader.propTypes = {}\n\nconst mapStateToProps = state => {\n  return {\n  }\n}\n\nexport default connect(mapStateToProps)(Header);\n","import store from 'store2';\n\n/**\n * Set session\n * @param {string} key\n * @param {any} value\n */\nconst set = (key = '', value = null) => {\n  if (!key && !value) return;\n  store.session(key, value);\n}\n\n/**\n * Get session by key\n * @param {string} key\n */\nconst get = (key = '') => store.session(key);\n\n/**\n * Remove session by key\n * @param {string} key \n */\nconst del = (key = '') => store.session.remove(key);\n\nexport {\n  set,\n  get,\n  del,\n}\n","const APIUrl = 'https://browndust-global-api.pmang.cloud/book/getAllCharacters';\n\n// origin url, but cross-origin \bpermission\n// const thumbnailUrl = 'https://ic-common.pmang.cloud/static/bdt_book/thumbnail';\nconst thumbnailUrl = 'http://robby570.tw/browndust-share/resource/thumbnail';\n\nexport {\n    APIUrl,\n    thumbnailUrl,\n}","import { thumbnailUrl } from '../config/api';\n\nexport const getThumbnailUrlByImageName = (_uiIconImageName = '') => {\n    const id = _uiIconImageName.split('*')[1];\n    return `${thumbnailUrl}/${id}.png`;\n}\n\nexport const resizeImageURL = (datas, w = null, h = w / 2) => {\n    return new Promise((resolve) => {\n        const img = document.createElement('img');\n        img.onload = () => {\n            const canvas = document.createElement('canvas');\n            const ctx = canvas.getContext('2d');\n            if (w !== null) canvas.width = w;\n            if (h !== null) canvas.height = h;\n            ctx.drawImage(img, 0, 0, w, h);\n            const dataURI = canvas.toDataURL();\n            resolve(dataURI);\n        };\n        img.src = datas;\n        img.crossOrigin = 'anonymous';\n        // document.body.appendChild(img);\n    });\n}\n","export const setLocal = payload => ({\n  type: 'SET_LOCALE',\n  locale: payload,\n});\n\nexport const setCharacters = payload => ({\n  type: 'SET_CHARACTERS',\n  payload,\n});\n\nexport const updateDataset = payload => ({\n  type: 'UPDATE_FORMATION',\n  payload,\n});\n\nexport const resetDataset = payload => ({\n  type: 'RESET_FORMATION',\n  payload,\n});\n\n// DEMO ===========================\n// let nextTodoId = 0\n// export const addTodo = text => ({\n//   type: 'ADD_TODO',\n//   id: nextTodoId++,\n//   text,\n// })\n\n// export const toggleTodo = id => ({\n//   type: 'TOGGLE_TODO',\n//   id,\n// })\n// DEMO ===========================\n","/* eslint-disable no-empty */\n/* eslint-disable no-underscore-dangle */\nimport React, { Component } from 'react';\nimport './Formation.scss';\n\nimport { connect } from 'react-redux';\n\nimport { get, del } from '../service/Session';\nimport { getThumbnailUrlByImageName } from '../utils';\nimport { updateDataset } from '../actions';\n\nclass Formation extends Component {\n  constructor(props) {\n    super(props);\n    this.props = props;\n    this.dispatch = props.dispatch;\n    this.state = {\n      alertID: null,\n      alertTimer: null,\n    }\n  }\n\n  /**\n   * 新增圖片\n   * @param {*} tid target position id \n   * @param {*} cold character code\n   */\n  onAddImage(tid = null, code = null) {\n    // select character by _code\n    const c = this.characters.find(({ _code }) => _code === code);\n    // get formation state\n    if (code || c) {\n      // select target position id\n      this.formation = this.formation.map(f =>\n        f.id === tid ?\n          {\n            ...f,\n            backgroundImage: `url(${getThumbnailUrlByImageName(c._uiIconImageName)})`,\n            type: Number(c._type),\n            code: code,\n            dragOver: false,\n          } : f\n      )\n      this.dispatch(updateDataset({ formation: this.formation }));\n    }\n  }\n\n  /**\n   * 刪除圖片\n   * @param {*} pid position id \n   * @param {*} cold character code\n   */\n  onRemoveImage(pid = null, code = null) {\n    const c = this.characters.find(({ _code }) => _code === code);\n    if (code || c) {\n      // Remove image from source\n      // select target position id\n      this.formation = this.formation.map(f =>\n        f.id === pid ?\n          {\n            ...f,\n            backgroundImage: null,\n            type: null,\n            code: null,\n            dragOver: false,\n          } : f\n      )\n      this.dispatch(updateDataset({ formation: this.formation }));\n    }\n  }\n\n  /**\n   * Check the target image is exist\n   * @param {*} drag drag or click mode\n   * @param {*} tid target id\n   * @param {*} sid source id\n   * @param {*} scode source code\n   */\n  onCheckExistImage(drag, tid, sid = null, scode) {\n    let exist = false;\n    const source = this.formation.filter(({ code }) => code === scode);\n    if (drag && sid === '0' && source.length > 0) {\n      exist = true; // drag mode\n    } else if (!drag && source.length > 0) {\n      exist = true; // click mode\n    }\n\n    if (exist) {\n      // add alarm style\n      this.setState({ alertID: source[0].id });\n      setTimeout(() => { this.setState({ alertID: null }) }, 1000);\n      // remove target style\n      this.onDragChangeStyle(tid, false);\n      del('_code');\n      console.warn('already have!');\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * Dropover style\n   * @param {*} tid \n   */\n  onDragChangeStyle(tid = null, bool = true) {\n    let hasUpdate = false;\n    this.formation = this.formation.map(f => {\n      if (f.id === tid) {\n        // need update style [performance]\n        if (f.dragOver !== bool) hasUpdate = true;\n        return { ...f, dragOver: bool };\n      }\n      return f;\n    });\n    if (hasUpdate)\n      this.dispatch(updateDataset({ formation: this.formation }));\n  }\n\n  /**\n   * 座標編號\n   * @param {*} id \n   */\n  onFormationClick(id = null) {\n    const code = get('_code');\n    if (!code) return;\n    if (this.onCheckExistImage(false, id, null, code)) return;\n    this.onAddImage(id, code);\n    del('_code');\n  }\n\n  /**\n   * sid source position id\n   * scode source position image code\n   */\n  onDragStart = (ev, scode = null, sid = null) => {\n    ev.dataTransfer.setData('scode', scode);\n    ev.dataTransfer.setData('sid', sid);\n  }\n\n  onDragOver = (ev, tid = null) => {\n    ev.preventDefault();\n  }\n\n  onDragEnter = (ev, tid = null) => {\n    ev.preventDefault();\n    this.onDragChangeStyle(tid, true);\n  }\n\n  onDragLeave = (ev, tid = null) => {\n    ev.preventDefault();\n    this.onDragChangeStyle(tid, false);\n  }\n\n  /**\n   * tid target position id\n   */\n  onDrop = (ev, tid = null) => {\n    const sid = ev.dataTransfer.getData('sid');\n    const scode = ev.dataTransfer.getData('scode');\n    const target = this.formation.find(({ id }) => id === tid);\n    // check is exist\n    if (this.onCheckExistImage(true, tid, sid, scode)) return;\n    // check moving or exchanging \n    if (target.backgroundImage === null) {\n      // moving\n      // console.log('move');\n      this.onAddImage(tid, scode);\n      this.onRemoveImage(sid, scode);\n    } else {\n      // exchage\n      // console.log('exchage');\n      this.onAddImage(sid, target.code);\n      this.onAddImage(tid, scode);\n    }\n  }\n\n  /**\n   * 移動結束\n   */\n  onDragEnd = (ev, id, code) => {\n    ev.preventDefault();\n    // Plan: remove by drag to outside\n    // console.log(ev.target);\n    // console.log(ev.target.getAttribute('id'), id);\n    // console.log(ev.target.getAttribute('draggable'));\n\n    // const drag = ev.target.getAttribute('draggable');\n    // if (drag) {\n    //   console.log('remove')\n    //   this.onRemoveImage(id, code)\n    // };\n  }\n\n  renderFormation() {\n    return this.formation.map(({ id, top, left, type, backgroundImage, code, dragOver }) => {\n      return (\n        <div\n          key={`formation-${id}`}\n          className={`box ${dragOver ? 'over' : ''} ${this.state.alertID === id ? 'shake-hard shake-constant shake-constant--hover' : ''}`}\n          id={id}\n          data-type={type}\n          draggable={code ? true : false}\n          style={{ top, left, backgroundImage }}\n          onClick={() => this.onFormationClick(id)}\n          onDoubleClick={() => this.onRemoveImage(id, code)}\n          onDragStart={(e) => this.onDragStart(e, code, id)}\n          onDragOver={(e) => this.onDragOver(e, id)}\n          onDragEnter={(e) => this.onDragEnter(e, id)}\n          onDragLeave={(e) => this.onDragLeave(e, id)}\n          onDrop={(e) => { this.onDrop(e, id) }}\n          onDragEnd={(e) => this.onDragEnd(e, id, code)}\n        >\n          <div className='type' data-type={type}></div>\n        </div>\n      )\n    });\n  }\n\n  render() {\n    this.formation = this.props.dataset.formation;\n    const { type, backcolor, backimage, order } = this.props.dataset.options;\n    this.characters = this.props.characters;\n    return (\n      <div\n        id='formation'\n        className={\n          `formation \n        ${type ? '' : 'no-type'}\n        ${backcolor ? '' : 'no-backcolor'}\n        ${backimage ? '' : 'no-backimage'}\n        ${order ? '' : 'no-order'}\n        `\n        }\n      >\n        {this.renderFormation()}\n      </div>\n    );\n  }\n}\n\nFormation.propTypes = {}\n\nconst mapStateToProps = state => {\n  return {\n    characters: state.characters,\n    dataset: state.dataset,\n  }\n}\n\nexport default connect(mapStateToProps)(Formation);","/* eslint-disable camelcase */\n/* eslint-disable no-underscore-dangle */\nimport React, { Component } from 'react';\nimport './Mercenary.scss';\n\nimport { connect } from 'react-redux';\n\nimport { set } from '../service/Session';\nimport { getThumbnailUrlByImageName } from '../utils';\n\nclass Mercenary extends Component {\n  constructor(props) {\n    super(props);\n    this.props = props;\n    this.state = {\n    }\n  }\n\n  /**\n   * sid source position id\n   * scode source position image code\n   */\n  onDragStart = (ev, scode, sid) => {\n    ev.dataTransfer.setData('scode', scode);\n    ev.dataTransfer.setData('sid', sid);\n  }\n\n  render() {\n    const { _uiIconImageName, _charName_TW, _code } = this.props.params;\n    const URL = getThumbnailUrlByImageName(_uiIconImageName);\n    return (\n      <div\n        className='mercenary'\n        style={{ backgroundImage: `url(${URL})` }}\n        data-tooltip={_charName_TW}\n        draggable\n        onClick={() => set('_code', _code)}\n        onDragStart={(e) => this.onDragStart(e, _code, 0)}\n      >\n      </div>\n    );\n  }\n}\n\nMercenary.propTypes = {}\n\nconst mapStateToProps = state => {\n  return {\n  }\n}\n\nexport default connect(mapStateToProps)(Mercenary);\n","/* eslint-disable no-underscore-dangle */\n/* eslint-disable no-mixed-operators */\nimport React, { Component } from 'react';\nimport './List.scss';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { Checkbox } from 'pretty-checkbox-react';\nimport { FaStar, FaEye } from \"react-icons/fa\";\n\nimport Mercenary from '../components/Mercenary';\n\nclass List extends Component {\n  constructor(props) {\n    super(props);\n    this.props = props;\n    this.state = {\n      type: 1,\n      types: [\n        { type: 1, style: 'attacker', label: '攻擊' },\n        { type: 2, style: 'defender', label: '防禦' },\n        { type: 3, style: 'magician', label: '魔法' },\n        { type: 4, style: 'supporter', label: '支援' },\n      ],\n      stars: [\n        { label: '5星', checked: true, star: 5 },\n        { label: '4星', checked: true, star: 4 },\n        { label: '3星', checked: false, star: 3 },\n        { label: '一般', checked: false, star: 2 },\n      ],\n      nameOptions: [\n        { label: '顯示', checked: true },\n        { label: '粗體', checked: false },\n      ],\n    };\n  }\n\n  onStarChange = (_label) => {\n    const stars = this.state.stars;\n    const star = stars.find(({ label }) => label === _label);\n    star.checked = !star.checked;\n    this.setState({ stars });\n  }\n\n  onNameOptionsChange = (_label) => {\n    const nameOptions = this.state.nameOptions;\n    const nameOption = nameOptions.find(({ label }) => label === _label);\n    nameOption.checked = !nameOption.checked;\n    this.setState({ nameOptions });\n  }\n\n  /**\n   * 渲染傭兵類型\n   */\n  renderTypes() {\n    return this.state.types.map(({ type, style, label }) =>\n      (\n        <button\n          key={`type-${label}`}\n          type='button'\n          className={`type ${style} ${type === this.state.type ? 'active' : ''}`}\n          onClick={() => this.setState({ type })}\n        >\n          <i></i>\n          <span>{label}</span>\n        </button>\n      ));\n  }\n\n  /**\n   * 渲染傭兵星級篩選功能\n   */\n  renderFilterStars() {\n    return this.state.stars.map(({ label, checked }, index) =>\n      (\n        <Checkbox\n          key={`start-${index}`}\n          shape='round'\n          color='info'\n          animation='jelly'\n          icon={<i className=\"mdi mdi-check\" />}\n          checked={checked}\n          onChange={() => this.onStarChange(label)}\n        >\n          {label}\n        </Checkbox>\n      ));\n  }\n\n  /**\n   * 渲染傭兵名稱呈現功能\n   */\n  renderFilterNameOptions() {\n    return this.state.nameOptions.map(({ label, checked }, index) => (\n      <Checkbox\n        key={`name-${index}`}\n        shape='round'\n        color='info'\n        animation='jelly'\n        icon={<i className=\"mdi mdi-check\" />}\n        checked={checked}\n        onChange={() => this.onNameOptionsChange(label)}\n      >\n        {label}\n      </Checkbox>\n    ));\n  }\n\n  /**\n   * 渲染傭兵列表\n   */\n  renderCharacters() {\n    return this.props.characters\n      .filter(({ _type, _growType, _star }) => {\n        return (\n          Number(_type) === this.state.type &&\n          Number(_growType) >= 0 &&\n          (\n            this.state.stars[0].checked && Number(_star) === 5 ||\n            this.state.stars[1].checked && Number(_star) === 4 ||\n            this.state.stars[2].checked && Number(_star) === 3 ||\n            this.state.stars[3].checked && Number(_star) === 2 ||\n            this.state.stars[3].checked && Number(_star) === 1\n          )\n        )\n      })\n      .map((c, index) => (\n        <Mercenary\n          key={`mercenary-${index}`}\n          params={c}\n          nameOptions={this.state.nameOptions}\n        />\n      ))\n  }\n\n  render() {\n    return (\n      <div className='list'>\n        <div className='types'>\n          {this.renderTypes()}\n        </div>\n        <div className='filter'>\n          <div className='star'>\n            <span className='filter-title'><FaStar /> 星級：</span>\n            {this.renderFilterStars()}\n          </div>\n          <div className='name'>\n            <span className='filter-title'><FaEye /> 名稱：</span>\n            {this.renderFilterNameOptions()}\n          </div>\n        </div>\n\n        <div className={`content\n          ${this.state.nameOptions[0].checked ? 'show' : ''} \n          ${this.state.nameOptions[1].checked ? 'bold' : ''}\n          `}\n        >\n          {this.renderCharacters()}\n        </div>\n      </div>\n    );\n  }\n}\n\nList.propTypes = {\n  characters: PropTypes.array.isRequired,\n}\n\nconst mapStateToProps = state => {\n  return {\n    characters: state.characters,\n  }\n}\n\nexport default connect(mapStateToProps)(List);\n","import React, { Component } from 'react';\nimport './Toolbar.scss';\n\nimport { connect } from 'react-redux';\nimport { MdRefresh, MdCloudDownload } from 'react-icons/md';\nimport { Checkbox, Radio } from 'pretty-checkbox-react';\n// import domtoimage from 'dom-to-image';\nimport domtoimage from '../utils/dom-to-image';\n\nimport { updateDataset } from '../actions';\nimport { resizeImageURL } from '../utils';\n\nclass Toolbar extends Component {\n  constructor(props) {\n    super(props);\n    this.dispatch = props.dispatch;\n    this.state = {\n      downloadSizeSelected: 2,\n      downloadSizeCustom: null,\n      downloadSize: [\n        { value: 1, name: 700 },\n        { value: 2, name: 500 },\n        { value: 3, name: 300 },\n        { value: 4, name: '自訂寬度' },\n      ],\n    };\n  }\n\n  onUpdateOptions(payload) {\n    const options = { ...this.options, ...payload };\n    this.dispatch(updateDataset({ options }));\n  }\n\n  onDownloadClick() {\n    const node = document.getElementById('formation');\n    domtoimage\n      .toPng(node)\n      .then(async dataUrl => {\n        const size = this.state.downloadSizeSelected !== 4 ? this.state.downloadSize\n          .find(d => d.value === this.state.downloadSizeSelected).name\n          : Number(this.state.downloadSizeCustom);\n        if (size <= 0) return;\n\n        const a = document.createElement('a');\n        const newDataUri = await resizeImageURL(dataUrl, size);\n        a.href = newDataUri;\n        a.download = 'output.png';\n        document.body.appendChild(a);\n        a.click();\n        document.body.removeChild(a);\n      })\n      .catch(error => console.error('domtoimage wrong', error));\n  }\n\n  render() {\n    this.options = this.props.dataset.options;\n    return (\n      <div className='toolbar'>\n        <div className='options'>\n          顯示內容：\n          <Checkbox\n            shape='round'\n            color='info'\n            animation='jelly'\n            icon={<i className=\"mdi mdi-check\" />}\n            checked={this.options.type}\n            onChange={e => this.onUpdateOptions({ type: e.target.checked })}\n          >\n            傭兵類型\n          </Checkbox>\n          <Checkbox\n            shape='round'\n            color='info'\n            animation='jelly'\n            icon={<i className=\"mdi mdi-check\" />}\n            checked={this.options.order}\n            onChange={e => this.onUpdateOptions({ order: e.target.checked })}\n          >\n            出手順序\n          </Checkbox>\n          <Checkbox\n            shape='round'\n            color='info'\n            animation='jelly'\n            icon={<i className=\"mdi mdi-check\" />}\n            checked={this.options.backcolor}\n            onChange={e => this.onUpdateOptions({ backcolor: e.target.checked })}\n          >\n            背景顏色\n          </Checkbox>\n          <Checkbox\n            shape='round'\n            color='info'\n            animation='jelly'\n            icon={<i className=\"mdi mdi-check\" />}\n            checked={this.options.backimage}\n            onChange={e => this.onUpdateOptions({ backimage: e.target.checked })}\n          >\n            背景方格\n          </Checkbox>\n        </div>\n\n        <div className='options'>\n          圖片寬度：\n          {\n            this.state.downloadSize.map(({ value, name }) => {\n              return (\n                <Radio\n                  key={`download-szie-${value}`}\n                  name='download-size'\n                  shape='round'\n                  color='info'\n                  animation='jelly'\n                  icon={<i className=\"mdi mdi-check\" />}\n                  value={value}\n                  checked={value === this.state.downloadSizeSelected}\n                  onChange={() => this.setState({ downloadSizeSelected: value })}\n                >\n                  {value !== 4 ? `${name}px` : name}\n                </Radio>\n              );\n            })\n          }\n          <input\n            className='download-size-custom'\n            defaultValue={this.state.downloadSizeCustom}\n            onChange={(e) => this.setState({ downloadSizeCustom: e.target.value })}\n            onFocus={() => this.setState({ downloadSizeSelected: 4 })}\n          />\n        </div>\n\n        <div className='commands'>\n          <button\n            type='button'\n            className='tool attacker'\n            onClick={() => {\n              const formation = this.props.dataset.formation.map(f => ({ ...f, type: 0, backgroundImage: null, code: null, dragOver: false }));\n              this.dispatch(updateDataset({ formation }));\n            }}\n          >\n            <MdRefresh size='2em' color='#fff' />\n            <span>重置</span>\n          </button>\n          <button\n            type='button'\n            className='tool attacker'\n            onClick={() => this.onDownloadClick()}\n          >\n            <MdCloudDownload size='2em' color='#fff' />\n            <span>下載</span>\n          </button>\n        </div>\n      </div>\n    );\n  }\n}\n\nToolbar.propTypes = {}\n\nconst mapStateToProps = state => {\n  return {\n    dataset: state.dataset,\n  }\n}\n\nexport default connect(mapStateToProps)(Toolbar);\n","import { APIUrl } from '../config/api';\n\nconst getCharacters = async () => fetch(APIUrl).then(data => data.json() || [])\n\nexport { getCharacters };\n","import React, { Component } from 'react';\nimport './App.scss';\n\n// import { Switch, BrowserRouter as Router, Route } from 'react-router-dom';\nimport { connect } from 'react-redux';\n\nimport Header from './container/Header';\nimport Formation from './container/Formation';\nimport List from './container/List';\nimport Toolbar from './container/Toolbar';\n\nimport { setCharacters } from './actions';\nimport { getCharacters } from './service/Characters';\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.dispatch = props.dispatch;\n  }\n\n  componentDidMount() {\n    getCharacters().then(data => this.dispatch(setCharacters(data)));\n  }\n\n  render() {\n    this.database = this.props.database;\n    this.users = this.props.users;\n    return (\n      <div id='wrapper'>\n        <Header />\n        <section id='container'>\n          <div className='main'>\n            <Formation />\n            <Toolbar />\n          </div>\n          <List />\n        </section>\n      </div>\n    );\n  }\n}\n\nApp.propTypes = {}\n\nconst mapStateToProps = state => {\n  return {\n    characters: state.characters,\n  }\n}\n\nexport default connect(mapStateToProps)(App);\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { createStore, applyMiddleware } from 'redux';\nimport { Provider } from 'react-redux';\nimport thunk from 'redux-thunk';\nimport './index.scss';\nimport './i18n';\nimport reducers from './reducers';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nconst store = createStore(\n  reducers,\n  applyMiddleware(thunk)\n);\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}